{
  "files": [
    {
      "filename": "index.html",
      "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Digital Clock</title>\n    <style>\n        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; background: #f0f0f0; }\n        .clock { font-size: 3em; margin: 20px; padding: 20px; background: white; border-radius: 10px; display: inline-block; }\n        .controls { margin: 20px; }\n        select, button { font-size: 1em; padding: 10px; margin: 5px; border-radius: 5px; border: 1px solid #ccc; }\n        button { background: #007bff; color: white; border: none; cursor: pointer; }\n        button:hover { background: #0056b3; }\n    </style>\n</head>\n<body>\n    <h1>Digital Clock</h1>\n    <div class=\"clock\" id=\"time\">Loading...</div>\n    <div class=\"controls\">\n        <select id=\"timezone\">\n            <option value=\"\">Loading timezones...</option>\n        </select>\n        <button id=\"toggleFormat\">Switch to 12-hour</button>\n    </div>\n    <script>\n        let is24Hour = true;\n        let currentTimezone = '';\n        const timeEl = document.getElementById('time');\n        const timezoneSelect = document.getElementById('timezone');\n        const toggleBtn = document.getElementById('toggleFormat');\n        \n        function loadTimezones() {\n            fetch('/api/timezones')\n                .then(res => res.json())\n                .then(data => {\n                    timezoneSelect.innerHTML = '';\n                    data.forEach(tz => {\n                        const option = document.createElement('option');\n                        option.value = tz.value;\n                        option.textContent = tz.label;\n                        timezoneSelect.appendChild(option);\n                    });\n                    loadUserSettings();\n                })\n                .catch(() => timezoneSelect.innerHTML = '<option value=\"\">Error loading timezones</option>');\n        }\n        \n        function loadUserSettings() {\n            fetch('/api/user-settings')\n                .then(res => res.json())\n                .then(settings => {\n                    if (settings.timezone) {\n                        timezoneSelect.value = settings.timezone;\n                        currentTimezone = settings.timezone;\n                    }\n                    if (settings.hour_format === '12') {\n                        is24Hour = false;\n                        toggleBtn.textContent = 'Switch to 24-hour';\n                    }\n                    updateTime();\n                })\n                .catch(() => updateTime());\n        }\n        \n        function updateTime() {\n            const params = new URLSearchParams();\n            if (timezoneSelect.value) params.append('timezone', timezoneSelect.value);\n            params.append('hour_format', is24Hour ? '24' : '12');\n            \n            fetch(`/api/current-time?${params}`)\n                .then(res => res.json())\n                .then(data => {\n                    timeEl.textContent = data.time;\n                })\n                .catch(() => timeEl.textContent = 'Error fetching time');\n        }\n        \n        function saveUserSettings() {\n            const settings = {\n                timezone: timezoneSelect.value,\n                hour_format: is24Hour ? '24' : '12'\n            };\n            \n            fetch('/api/user-settings', {\n                method: 'POST',\n                headers: {'Content-Type': 'application/json'},\n                body: JSON.stringify(settings)\n            }).catch(() => console.log('Failed to save settings'));\n        }\n        \n        toggleBtn.addEventListener('click', () => {\n            is24Hour = !is24Hour;\n            toggleBtn.textContent = is24Hour ? 'Switch to 12-hour' : 'Switch to 24-hour';\n            updateTime();\n            saveUserSettings();\n        });\n        \n        timezoneSelect.addEventListener('change', () => {\n            updateTime();\n            saveUserSettings();\n        });\n        \n        window.onload = () => {\n            loadTimezones();\n            setInterval(updateTime, 1000);\n        };\n    </script>\n</body>\n</html>",
      "description": "Main HTML page with digital clock, timezone selection, and 12/24-hour toggle integrated with backend API"
    }
  ],
  "setup_instructions": "Open index.html in browser (requires backend API running on same origin)"
}