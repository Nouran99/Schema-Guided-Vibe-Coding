{
  "files": [
    {
      "filename": "main.py",
      "content": "from fastapi import FastAPI, HTTPException\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom pydantic import BaseModel\nfrom datetime import datetime\nfrom typing import List, Optional\nimport uuid\n\napp = FastAPI()\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"*\"],\n    allow_credentials=True,\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"],\n)\n\ncalculations = {}\n\nclass CalculationRequest(BaseModel):\n    operand1: float\n    operand2: float\n    operation: str\n\nclass CalculationResponse(BaseModel):\n    id: str\n    operand1: float\n    operand2: float\n    operation: str\n    result: float\n    created_at: datetime\n\n@app.post(\"/api/calculate\", response_model=CalculationResponse)\ndef calculate(request: CalculationRequest):\n    if request.operation == \"add\":\n        result = request.operand1 + request.operand2\n    elif request.operation == \"subtract\":\n        result = request.operand1 - request.operand2\n    elif request.operation == \"multiply\":\n        result = request.operand1 * request.operand2\n    elif request.operation == \"divide\":\n        if request.operand2 == 0:\n            raise HTTPException(status_code=400, detail=\"Division by zero\")\n        result = request.operand1 / request.operand2\n    else:\n        raise HTTPException(status_code=400, detail=\"Invalid operation\")\n    \n    calc_id = str(uuid.uuid4())\n    calc = CalculationResponse(\n        id=calc_id,\n        operand1=request.operand1,\n        operand2=request.operand2,\n        operation=request.operation,\n        result=result,\n        created_at=datetime.now()\n    )\n    calculations[calc_id] = calc\n    return calc\n\n@app.get(\"/api/calculations\", response_model=List[CalculationResponse])\ndef get_calculations():\n    return list(calculations.values())\n\n@app.get(\"/api/calculations/{id}\", response_model=CalculationResponse)\ndef get_calculation(id: str):\n    if id not in calculations:\n        raise HTTPException(status_code=404, detail=\"Calculation not found\")\n    return calculations[id]\n\n@app.delete(\"/api/calculations/{id}\")\ndef delete_calculation(id: str):\n    if id not in calculations:\n        raise HTTPException(status_code=404, detail=\"Calculation not found\")\n    del calculations[id]\n    return {\"message\": \"Calculation deleted\"}\n\n@app.delete(\"/api/calculations\")\ndef clear_calculations():\n    calculations.clear()\n    return {\"message\": \"All calculations cleared\"}\n",
      "description": "Main FastAPI app with calculator endpoints"
    }
  ],
  "setup_instructions": "pip install fastapi uvicorn && uvicorn main:app --reload"
}