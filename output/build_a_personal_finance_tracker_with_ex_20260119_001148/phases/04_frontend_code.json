{
  "files": [
    {
      "filename": "index.html",
      "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Finance Tracker</title>\n    <script src=\"https://cdn.jsdelivr.net/npm/chart.js\"></script>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        h1 { color: #333; }\n        .section { margin-bottom: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }\n        input, select, button { margin: 5px; padding: 8px; }\n        #transactionsList, #categoriesList { list-style: none; padding: 0; }\n        li { padding: 5px; border-bottom: 1px solid #eee; }\n        .income { color: green; }\n        .expense { color: red; }\n        .charts { display: flex; flex-wrap: wrap; }\n        .chart-container { width: 300px; margin: 10px; }\n    </style>\n</head>\n<body>\n    <h1>Personal Finance Tracker</h1>\n\n    <div class=\"section\">\n        <h2>Add Transaction</h2>\n        <input id=\"desc\" placeholder=\"Description\">\n        <input id=\"amount\" type=\"number\" placeholder=\"Amount\">\n        <select id=\"type\">\n            <option value=\"income\">Income</option>\n            <option value=\"expense\">Expense</option>\n        </select>\n        <select id=\"category\"></select>\n        <input id=\"date\" type=\"date\">\n        <button onclick=\"addTransaction()\">Add</button>\n    </div>\n\n    <div class=\"section\">\n        <h2>Transactions</h2>\n        <div>\n            <input id=\"startDate\" type=\"date\"> to <input id=\"endDate\" type=\"date\">\n            <button onclick=\"filterTransactions()\">Filter</button>\n        </div>\n        <ul id=\"transactionsList\"></ul>\n    </div>\n\n    <div class=\"section\">\n        <h2>Categories & Budgets</h2>\n        <input id=\"catName\" placeholder=\"Category Name\">\n        <input id=\"catBudget\" type=\"number\" placeholder=\"Budget\">\n        <button onclick=\"addCategory()\">Add Category</button>\n        <ul id=\"categoriesList\"></ul>\n    </div>\n\n    <div class=\"section\">\n        <h2>Budget Progress</h2>\n        <div id=\"progress\"></div>\n    </div>\n\n    <div class=\"section\">\n        <h2>Charts</h2>\n        <div class=\"charts\">\n            <div class=\"chart-container\">\n                <canvas id=\"pieChart\"></canvas>\n            </div>\n            <div class=\"chart-container\">\n                <canvas id=\"barChart\"></canvas>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        const API_BASE = 'http://localhost:8000/api';\n        let pieChart, barChart;\n\n        async function fetchData(endpoint) {\n            try {\n                const res = await fetch(`${API_BASE}${endpoint}`);\n                return await res.json();\n            } catch (err) {\n                console.error('Fetch error:', err);\n                return [];\n            }\n        }\n\n        async function postData(endpoint, data) {\n            await fetch(`${API_BASE}${endpoint}`, {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify(data)\n            });\n            loadAll();\n        }\n\n        async function addTransaction() {\n            const desc = document.getElementById('desc').value;\n            const amount = parseFloat(document.getElementById('amount').value);\n            const type = document.getElementById('type').value;\n            const categoryId = parseInt(document.getElementById('category').value);\n            const date = document.getElementById('date').value;\n            if (!desc || !amount || !date || !categoryId) return alert('Fill all fields');\n            await postData('/transactions', { description: desc, amount, type, category_id: categoryId, date });\n        }\n\n        async function addCategory() {\n            const name = document.getElementById('catName').value;\n            const budget = parseFloat(document.getElementById('catBudget').value);\n            if (!name || !budget) return alert('Fill all fields');\n            await postData('/categories', { name, budget });\n        }\n\n        async function filterTransactions() {\n            const start = document.getElementById('startDate').value;\n            const end = document.getElementById('endDate').value;\n            let url = '/transactions';\n            if (start && end) url += `?start_date=${start}&end_date=${end}`;\n            const trans = await fetchData(url);\n            displayTransactions(trans);\n        }\n\n        function displayTransactions(trans) {\n            const transList = document.getElementById('transactionsList');\n            transList.innerHTML = trans.map(t => \n                `<li class=\"${t.type}\">${t.date}: ${t.description} - $${t.amount} (Category: ${t.category_id})</li>`\n            ).join('');\n        }\n\n        function updateCharts(progress) {\n            const ctxPie = document.getElementById('pieChart').getContext('2d');\n            const ctxBar = document.getElementById('barChart').getContext('2d');\n            \n            if (pieChart) pieChart.destroy();\n            if (barChart) barChart.destroy();\n            \n            const labels = progress.map(p => p.category_name);\n            const spent = progress.map(p => p.spent);\n            \n            pieChart = new Chart(ctxPie, {\n                type: 'pie',\n                data: {\n                    labels: labels,\n                    datasets: [{ data: spent, backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0'] }]\n                }\n            });\n            \n            barChart = new Chart(ctxBar, {\n                type: 'bar',\n                data: {\n                    labels: labels,\n                    datasets: [{ label: 'Spent', data: spent, backgroundColor: '#36A2EB' }]\n                }\n            });\n        }\n\n        async function loadAll() {\n            const trans = await fetchData('/transactions');\n            const cats = await fetchData('/categories');\n            const progress = await fetchData('/budget-progress');\n\n            displayTransactions(trans);\n            \n            const catList = document.getElementById('categoriesList');\n            catList.innerHTML = cats.map(c => \n                `<li>${c.name}: Budget $${c.budget}</li>`\n            ).join('');\n            \n            const catSelect = document.getElementById('category');\n            catSelect.innerHTML = cats.map(c => \n                `<option value=\"${c.id}\">${c.name}</option>`\n            ).join('');\n            \n            const progDiv = document.getElementById('progress');\n            progDiv.innerHTML = progress.map(p => \n                `<div>${p.category_name}: $${p.spent} / $${p.budget}</div>`\n            ).join('');\n            \n            updateCharts(progress);\n        }\n\n        loadAll();\n    </script>\n</body>\n</html>",
      "description": "Main HTML page with UI to add/view transactions with category selection, manage categories, show budget progress, and display pie/bar charts"
    }
  ],
  "setup_instructions": "Open index.html in browser after starting the backend API with: pip install fastapi uvicorn && uvicorn main:app --reload"
}