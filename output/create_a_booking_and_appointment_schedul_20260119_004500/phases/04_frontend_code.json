{
  "files": [
    {
      "filename": "index.html",
      "content": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Booking System</title>\n    <style>\n        body { font-family: sans-serif; margin: 20px; }\n        h1 { color: #333; }\n        .section { margin-bottom: 20px; }\n        select, input, button { padding: 8px; margin: 5px; }\n        #message { margin-top: 10px; padding: 10px; border-radius: 5px; }\n        .success { background: #d4edda; color: #155724; }\n        .error { background: #f8d7da; color: #721c24; }\n    </style>\n</head>\n<body>\n    <h1>Appointment Booking</h1>\n    <div class=\"section\">\n        <h3>1. Choose Service</h3>\n        <select id=\"serviceSelect\"><option>Loading...</option></select>\n    </div>\n    <div class=\"section\">\n        <h3>2. View Available Slots</h3>\n        <button onclick=\"loadAvailability()\">Load Slots</button>\n        <div id=\"slots\"></div>\n    </div>\n    <div class=\"section\">\n        <h3>3. Book Appointment</h3>\n        <input id=\"customerName\" placeholder=\"Your Name\">\n        <input id=\"customerEmail\" placeholder=\"Email\">\n        <button onclick=\"bookAppointment()\">Book Selected Slot</button>\n    </div>\n    <div id=\"message\"></div>\n    <script>\n        const API_BASE = 'http://localhost:8000';\n        let selectedSlotId = null;\n        async function loadServices() {\n            try {\n                const res = await fetch(`${API_BASE}/api/services`);\n                const services = await res.json();\n                const select = document.getElementById('serviceSelect');\n                select.innerHTML = services.map(s => `<option value=\"${s.id}\">${s.name} (${s.duration_minutes} min)</option>`).join('');\n            } catch (e) { showMessage('Failed to load services', 'error'); }\n        }\n        async function loadAvailability() {\n            const serviceId = document.getElementById('serviceSelect').value;\n            if (!serviceId) return showMessage('Select a service first', 'error');\n            try {\n                const res = await fetch(`${API_BASE}/api/availability?service_id=${serviceId}`);\n                const slots = await res.json();\n                const slotsDiv = document.getElementById('slots');\n                slotsDiv.innerHTML = slots.map(s => `<div><button onclick=\"selectSlot(${s.id})\">${new Date(s.start_time).toLocaleString()}</button></div>`).join('');\n            } catch (e) { showMessage('Failed to load slots', 'error'); }\n        }\n        function selectSlot(slotId) {\n            selectedSlotId = slotId;\n            showMessage('Slot selected', 'success');\n        }\n        async function bookAppointment() {\n            const name = document.getElementById('customerName').value.trim();\n            const email = document.getElementById('customerEmail').value.trim();\n            const serviceId = document.getElementById('serviceSelect').value;\n            if (!name || !email || !serviceId || !selectedSlotId) {\n                return showMessage('Fill all fields and select a slot', 'error');\n            }\n            try {\n                const customerRes = await fetch(`${API_BASE}/api/customers`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ name, email, phone: '' })\n                });\n                const customer = await customerRes.json();\n                const appointmentRes = await fetch(`${API_BASE}/api/appointments`, {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({ customer_id: customer.id, service_id: serviceId, slot_id: selectedSlotId })\n                });\n                if (appointmentRes.ok) {\n                    const appointment = await appointmentRes.json();\n                    showMessage(`Appointment booked! Confirmation #${appointment.id}`, 'success');\n                } else { throw new Error('Booking failed'); }\n            } catch (e) { showMessage('Booking failed', 'error'); }\n        }\n        function showMessage(text, type) {\n            const msg = document.getElementById('message');\n            msg.textContent = text;\n            msg.className = type;\n        }\n        loadServices();\n    </script>\n</body>\n</html>",
      "description": "Main HTML page for booking appointments with service selection, slot viewing, and booking form"
    }
  ],
  "setup_instructions": "Open index.html in browser (ensure backend API is running at http://localhost:8000)"
}